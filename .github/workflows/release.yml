name: Release Workflow

# Dispara este workflow sempre que uma tag no padrão v*.*.* for enviada ao repositório
on:
  push:
    tags:
      - 'v*.*.*'  # Exemplo: v1.0.0, v2.1.3 etc.

jobs:
  build:
    name: Detectar nova versão
    runs-on: ubuntu-latest  # Define o sistema operacional da máquina virtual

    steps:
      # Clona o repositório dentro do ambiente da Action
      - name: Checkout do repositório
        uses: actions/checkout@v3

      # Exibe o nome completo da tag
      - name: Mostrar referência completa
        run: echo "Tag detectada:'$GITHUB_REF'"
        
      # Exibe apenas o nome limpo da tag (ex: v1.0.0)
      - name: Mostrar nome simplificado da tag
        run: echo "Versão publicada:${GITHUB_REF_NAME}"

      # Exemplo de ação útil: criar artefatos, pacotes ou gerar logs
      - name: Exemplo - gerar log da versão
        run: |
          echo "Nova versão lançada: ${GITHUB_REF_NAME}" > release_log.txt
          cat release_log.txt